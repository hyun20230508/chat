(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".main-content"),t=new URLSearchParams(window.location.search).get("name");fetch("/friends",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((d=>{if(void 0!==d.result){const o=d.result;for(let d=0;d<o.length;d++){const a=document.createElement("div");a.classList.add("user-list-box");const c=document.createElement("div");c.classList.add("user-list-info"),c.innerText=`ID: ${o[d].user.loginId}  친구수락날짜: ${n(o[d].createdAt)}`;const s=document.createElement("button");s.classList.add("add-button"),s.innerText="친구 삭제";const i=document.createElement("button");i.classList.add("add-button"),i.innerText="DM",s.addEventListener("click",(()=>{fetch("/friends",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendId:o[d].userId})}).then((e=>{201===e.status?(alert("친구삭제 완료"),window.location.reload()):401===e.status?window.location.href="./index.html":e.json().then((e=>{alert(e.result)}))})).catch((e=>{alert("반복하여 오류 발생시 문의 바랍니다. abc@abc.com"+e)}))})),i.addEventListener("click",(()=>{const e=[o[d].friendId,o[d].userId].sort(((e,t)=>e-t));window.location.href=`./dm.html?name=${t}&dmNumber=${String(e[0])}${String(e[1])}&friendName=${o[d].user.loginId}`})),a.appendChild(c),a.appendChild(s),a.appendChild(i),null==e||e.appendChild(a)}}})).catch((e=>{alert("반복하여 오류 발생시 문의 바랍니다. abc@abc.com"+e)}));const n=e=>new Date(e).toLocaleString("ko-KR")}))})();